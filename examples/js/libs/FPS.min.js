function FPS(t,e,i){this.dataTarget=t||{},this.timeLog=e||t.timeLog||[(new Date).getTime()],this.logLimit=i||t.logLimit||180,FPS.prototype.softMerge(t,{fps:1,average:60,last:0,minFPS:1e16,maxFPS:0})}FPS.prototype.reset=function(){this.timeLog=[(new Date).getTime()],this.dataTarget.minFPS=1e16,this.dataTarget.maxFPS=0},FPS.prototype.update=function(t,e){this.logLimit<this.timeLog.length&&this.timeLog.shift(),this.timeLog.push(t||(new Date).getTime()),0!=e&&this.fps()},FPS.prototype.average=function(t,e){return void 0===t&&(t=1),0!=e&&this.fps(),parseFloat(this.dataTarget.average.toFixed(t))},FPS.prototype.fps=function(t){void 0===t&&(t=1);var e,i,o,a=this.timeLog,r=a.length,n=this.dataTarget;return n.last=a[r-1]-a[r-2],n.fps=1e3/n.last,r>2?(o=n.last/1e3,e=r-1,i=Math.max(e-Math.ceil(n.fps)*(this.logLimit/60),0),n.average=(e-i)/(a[e]-a[i])*1e3,r>Math.max(this.logLimit*o/4,1)&&(n.minFPS=Math.min(n.average,n.minFPS),n.maxFPS=Math.max(n.average,n.maxFPS))):n.fps=-1,parseFloat(n.fps.toFixed(t))},FPS.prototype.timeLog=function(t){var e=this.timeLog;return void 0!==t&&(e=t),"array"!=typeof e&&(e=[(new Date).getTime()]),e},FPS.prototype.logLimit=function(t){var e=this.logLimit;return void 0===t?e:(e=t,"number"!=typeof e&&(e=360),16>e&&(e=16),e.slice(e),e)},FPS.prototype.dataTarget=function(t){return void 0!==t&&(this.dataTarget=t),this.dataTarget},FPS.prototype.softMerge=function(t,e,i){void 0===i&&(i=!0);var o,a={};for(o in t)if(o in e&&"object"==typeof t[o]&&null!==o)a[o]=this.softMerge(t[o],e[o]);else{var r=e[o];i===!0&&void 0!==r?a[o]=r:a[o]=t[o]}for(o in e)o in a||(a[o]=e[o]);return FPS.prototype.softExtend(t,a)},FPS.prototype.softExtend=function(){var t,e,i,o;for(o=arguments,e=o.length,t=1;e>t;t++)for(i in o[t])o[t].hasOwnProperty(i)&&(o[0][i]=o[t][i]);return o[0]};
