<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Three.js CCDIKSolver Browser</title>
		<link rel="shortcut icon" href="../../files/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="../../files/main.css">
		<style>
			canvas {
				display: block;
				width: 100%;
				height: 100%;
			}

			#newWindow {
				display: block;
				position: absolute;
				bottom: 0.3em;
				left: 0.5em;
				color: #fff;
			}
		</style>
	</head>
	<body>

		<!-- Import maps polyfill -->
		<!-- Remove this when import maps will be widely supported -->
		<script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

		<script type="importmap">
			{
				"imports": {
					"three": "../../build/three.module.js",
					"three/addons/": "../../examples/jsm/"
				}
			}
		</script>

		<a id='newWindow' href='./buffergeometry-browser.html' target='_blank'>Open in New Window</a>

		<script type="module">
			import {
				Color,
				ColorManagement,
				PerspectiveCamera,
				Scene,
				WebGLRenderer,
				BufferGeometry,
				BufferAttribute,
				MeshBasicMaterial,
				Mesh
			} from 'three';

			import { GUI } from 'three/addons/libs/lil-gui.module.min.js';

			ColorManagement.enabled = true;

			let gui, scene, camera, renderer, material;

			function initScene() {

				gui = new GUI();

				scene = new Scene();
				scene.background = new Color( 0x444444 );

				camera = new PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 200 );
				camera.position.z = 5;

				renderer = new WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				window.addEventListener( 'resize', function () {

					camera.aspect = window.innerWidth / window.innerHeight;
					camera.updateProjectionMatrix();

					renderer.setSize( window.innerWidth, window.innerHeight );

				}, false );

				initBufferGeometry();
				setupDatGui();

			}

			function setupDatGui() {

				gui.add( material, 'wireframe' );

			}

			function initBufferGeometry() {

				const geometry = new BufferGeometry();
				// create a simple square shape. We duplicate the top left and bottom right
				// vertices because each vertex needs to appear once per triangle.
				const vertices = new Float32Array( [
					- 1.0, - 1.0, 1.0,
					1.0, - 1.0, 1.0,
					1.0, 1.0, 1.0,

					1.0, 1.0, 1.0,
					- 1.0, 1.0, 1.0,
					- 1.0, - 1.0, 1.0
				] );

				// itemSize = 3 because there are 3 values (components) per vertex
				geometry.setAttribute( 'position', new BufferAttribute( vertices, 3 ) );
				material = new MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
				const mesh = new Mesh( geometry, material );

				scene.add( mesh );

			}

			function render() {

				requestAnimationFrame( render );

				renderer.render( scene, camera );

			}

			initScene();
			render();

		</script>
	</body>
</html>
