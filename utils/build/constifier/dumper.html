<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>THREE / WebGL constant dump</title>
	</head>
	<body>
		<canvas id="canvas" style="display:none"></canvas>
		<code id="output" style="white-space: pre"></code>

		<script src="../../../build/three.js"></script>

		<script>

			var glContext =
					document.getElementById( 'canvas' ).getContext( 'webgl' ),
				error = false;

			if ( ! THREE ) {

					error = true;
					alert( "No THREE!" );

			}

			if ( ! glContext ) {

					error = true;
					alert( "No GL context!" );

			}

			if ( error )
				throw new Error( "THREE and/or WebGL not available." );

			var json = [
				{
					contextRegExpString: '^THREE$',
					constants: findConstants( THREE )
				},
				{
					contextRegExpString: '^_?gl$',
					constants: findConstants( glContext )
				}
			];

			document.getElementById( 'output' ).
					innerHTML = JSON.stringify( json, null, '\t' );

			function findConstants( obj ) {

				var result = {},

					RegExpUpperCaseId = /^[A-Z_]\w+$/;

				for ( var name in obj ) {

					var value = obj[ name ];

					if ( typeof value === 'number' &&
							RegExpUpperCaseId.test( name ) ) {

						result[ name ] = value;

					}

				}

				return result;

			}

		</script>

	</body>
</html>


